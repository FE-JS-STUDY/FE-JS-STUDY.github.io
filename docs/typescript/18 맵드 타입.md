# 18 맵드 타입

> **맵드 타입?**
>
> 이미 정의된 타입을 가지고 새로운 타입을 생성할 때 사용하는 타입 문법

## 18.1 맵드 타입 첫 번째 예시: in

```typescript
type HeroNames = 'capt' | 'hulk' | 'thor';
type HeroAttendance = {
    [Name in HeroNames]: boolean;
};
```

```typescript
// key : 영웅 이름  value: 출석 여부
{
    capt: boolean;
    hulk: boolean;
    thor: boolean;
}
```

> **for in 반복문**
>
> 객체의 key, vlaue를 순회할 때 사용되는 문법
>
> ```javascript
> var obj = { a: 10, b: 20, c: 30 };
> for (var key in obj) {
>     console.log(key);  // a, b, c 순서대로 출력
> }
> ```



## 18.2 map() API로 이해하는 맵드 타입

```javascript
var arr = [1, 2, 3];
var doubleArr = arr.map(function(num) {
    return num * 2;
}); 
console.log(doubleArr);   // [2, 4, 6]
```

map() API의 특징은 기존 배열 값을 변경하지 않고 새로운 배열을 생성함.

맵드 타입은 타입을 변환하는 것이고  map() API는 실제 값을 변환하는 것

```javascript
var heroes = ['capt', 'hulk', 'thor'];
var heroAttendance = heroes.map(function(hero) {
    return {
        [hero]: true
    }
});
```

```javascript
var heroAttendance = [
    { capt: true },
    { hulk: true },
    { thor: true },
];
```



## 18.3 맵드 타입 두 번째 예시: keyof

```typescript
interface Hero {
    name: string;
    skill: string;
}

type HeroPropCheck = {
    [H in keyof Hero]: boolean;
};
```

> **keyof ??**
>
> 특정 타입의 키 값만 모아 문자열 유니언 타입으로 변환해 주는 키어드
>
> ```typescript
> interface Hero {
>     name: string;
>     skill: string;
> }
> 
> type HeroNames1 = keyof Hero;
> type HeroNames2 = 'name' | 'skill';
> ```

```typescript
interface Hero {
    name: string;
    skill: string;
}

type HeroPropCheck = {
    [H in keyof Hero]: boolean;
};

type HeroPropCheck = {
    [H in 'name' | 'skill']: boolean;  // 이렇게 풀어 쓸 수 있음
}
```



## 18.4 맵드 타입을 사용할 때 주의할 점

```typescript
type HeroNames = 'capt' | 'hulk' | 'thor';
type HeroAttendance = {
    [Name in HeroNames]: boolean;
};

// #1
type HeroAttendance = {
    [heroName in HeroNames]: boolean;
};

// #2
type HeroAttendance = {
    [name in HeroNames]: boolean;
};
```

in 뒤에 오는 타입은 이미 정의되어 있는 타입이기 때문에 `HeroName`으로 고정되고, in 앞에 오는 타입 변수는 순회할 타입 변수이므로 개발자 마음대로 작명할 수 있음

맵드 타입의 되는 타입 유형으로는 문자열 유니언 타입과 인터페이스 뿐만 아니라 타입 별칭으로 정의된 타입도 가능함.

```typescript
// 인터페이스 타입
interface Hero {
    name: string;
    skill: string;
}

type HeroPropCheck = {
    [H in keyof Hero]: boolean;
};

// 타입 별칭
type Hero = {
    name: string;
    skill: string;
};

type HeroPropCheck = {
    [H in keyof Hero]: boolean;
};
```

string 타입에 맵드 타입 문법을 적용하여 새로운 타입을 생성할 수도 있음

```typescript
type UserName = string;
type AddressBook = {
    [U in Username]: number;
};

var heroAddress: AddressBook = {  // key에 아무 문자열, value에는 number 속성 타입이면 아무거나 가능
    capt: 12312341234,
    hulk: 12308908458
}
```

맵드 타입을 사용할 수 없는 경우 : 객체의 속성 이름은 boolean으로 선언할 수 없음

```typescript
type Login = boolean;
type LoginAuth = {
    [L in Login]: string;  // error 발생
};
```

